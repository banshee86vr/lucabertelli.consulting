---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const homeSlug = `/${lang || ""}`;
const blogSlug = `/${lang || ""}/blog`;
const contactSlug = `/${lang || ""}/contact`;

import { getLocalizedPathname } from "../i18n/utils";
const { pathname } = Astro.url;
---

<header class="header__area pos-abs plr-50">
  <div class="header__inner">
    <div class="header__logo-3">
      <a href={homeSlug}>
        <img src="/logo.png" class="show-dark" alt="Site Logo" />
      </a>
    </div>
    <div class="header__nav">
      <nav class="main-menu">
        <ul>
          <li><a href={homeSlug}>{t("nav.home")}</a></li>
          <li><a href={blogSlug}>{t("nav.blog")}</a></li>
          <li><a href={contactSlug}>{t("nav.contact")}</a></li>
          <li><a href="https://github.com/banshee86vr/lucabertelli.consulting" target="_blank"><i class="fa-brands fa-github"></i></a></li>
          <li class="menu-item-has-children">
            <a href="#"><img src={t("nav.lang")} style="max-height:20px" /></a>
            <ul class="dp-menu">
              <li><a href={getLocalizedPathname(pathname, "it")}
                ><img src="/lang/it.png" style="max-height:20px;margin-right: 15px;" /> Italiano</a
              ></li>
              <li><a href={getLocalizedPathname(pathname, "en")}
                ><img src="/lang/en.png" style="max-height:20px;margin-right: 15px;" /> English</a
              ></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
    <div class="header__navicon">
      <button id="open_offcanvas" data-bs-toggle="offcanvas" data-bs-target="#offcanvasOne">
        <img src="/shape/menu-bar.png" alt="menu">
      </button>
    </div>
  </div>
</header>

<!-- Offcanves start -->
<div class="offcanvas__area">
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasOne">
    <button class="offcanvas__close" data-bs-dismiss="offcanvas"><i class="fa-solid fa-xmark"></i></button>
    <div class="offcanvas__body">
      <div class="offcanvas__logo">
        <a href={homeSlug}>
          <img src="/logo.png">
        </a>
      </div>

      <div class="offcanvas__menu-area">
        <div class="offcanvas__menu-wrapper">
        </div>
      </div>
      <div class="offcanvas__media">
        <h2 class="offcanvas__title">Follow</h2>
        <ul>
          <li>
            <a href="https://github.com/banshee86vr" target="_blank"><i class="fa-brands fa-github"></i></a>
          </li>
          <li>
            <a href="https://www.linkedin.com/in/luca-bertelli-a1413b77" target="_blank"><i class="fa-brands fa-linkedin"></i></a>
          </li>
          <li>
            <a href="https://medium.com/@bertelli.luca" target="_blank"><i class="fa-brands fa-medium"></i></a>
          </li>
          <li>
            <a href="https://www.credly.com/users/luca-bertelli" target="_blank"><i class="fa-solid fa-c"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- Offcanves end -->